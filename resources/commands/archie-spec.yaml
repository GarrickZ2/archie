title: Spec
description: Generate execution-ready coding specifications from design artifacts
tags: [specification, coding, execution]
category: Archie
content: |
  Generate a Coding Spec for implementation.

  ## Guard Check
  - Status MUST be: `DESIGNED`
  - Required files: features/<key>.md, workflow/<key>/workflow.md, api/api.md, storage.md
  - If check fails → STOP, list missing items, suggest `design` command

  ## Reads
  - features/<key>.md, api/api.md, api/*.thrift
  - workflow/<key>/*, storage.md, metrics.md, glossary.md

  ## Writes
  - spec/<key>.spec.md
  - features/<key>.md (Design Artifacts Spec link + Status → SPEC_READY + changelog)

  ## Workflow

  ### 1. Validate Completeness
  Check artifacts exist: API, workflow, storage, metrics
  If missing → create blocker, refuse to proceed

  ### 2. Generate Spec
  Derive from artifacts:
  - Interfaces: from api/api.md and *.thrift
  - Data Model: from storage.md
  - Workflow: from workflow/<key>/*.mmd
  - Edge Cases: from workflow failure paths
  - Observability: from metrics.md
  - Test Plan: generate checklist
  - Rollout: from background.md

  ### 3. User Approval
  Show spec → ask for confirmation → apply feedback if needed

  ### 4. Write After Approval
  - Write spec/<key>.spec.md
  - Update features/<key>.md: Status → SPEC_READY, changelog

  ## Correction Behavior
  If design artifacts missing → refuse, create blockers, set status BLOCKED
