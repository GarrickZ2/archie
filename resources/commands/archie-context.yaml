title: Context
description: Intelligent information dispatcher - add context to appropriate files
tags: [context, information, dispatcher, smart-add]
category: Archie
content: |
  Route free-form information to appropriate files with schema compliance.

  ## Guard Check
  - Any status allowed
  - Target files must exist (or suggest `init` first)

  ## Reads
  - background.md, glossary.md, features/<key>.md
  - Schema templates for formatting

  ## Writes
  - background.md, glossary.md, features/<key>.md
  - dependency.md, metrics.md, storage.md, api/api.md

  ## Workflow
  1. Gather: ask what information to add, identify scope (project/feature)
  2. Analyze: detect type (constraint, rule, domain knowledge, tech stack, etc.)
  3. Route: suggest target file + section
  4. Present: show formatted content → get approval
  5. Write: add to file, update changelog if feature file

  ## Routing Rules

  | Info Type | Target File |
  |-----------|-------------|
  | Tech stack, conventions | background.md |
  | Service names, terms | glossary.md |
  | Feature requirements | features/<key>.md |
  | Dependencies, SLAs | dependency.md |
  | Performance targets | metrics.md |
  | Data constraints | storage.md |

  ## Core Rules
  - User approval required
  - Schema compliance mandatory
  - Detect conflicts with existing content
  - If complex → suggest `design` command instead
  - If question → suggest `ask` command

  ## Correction Behavior
  - File missing → suggest `init`
  - Feature missing → suggest `revise --create`
  - Too complex → suggest `design`
